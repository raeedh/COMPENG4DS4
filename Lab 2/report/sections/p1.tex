\begin{filecontents}[overwrite]{./sections/p1_main.tex}
\begin{lstlisting}[language=c,caption=Problem 1 main, label=list:p1_main]
QueueHandle_t queue1;

int main(void) {
    BaseType_t status;
    /* Init board hardware. */
    BOARD_InitBootPins();
    BOARD_InitBootClocks();
    BOARD_InitDebugConsole();

    usr_str = malloc(sizeof(char) * 100);

    status = xTaskCreate(hello_task, "Hello_task", 200, (void*) usr_str, 2, &t_handle_1);
    if (status != pdPASS) {
        PRINTF("Task creation failed!.\r\n");
        while (1)
            ;
    }

    status = xTaskCreate(hello_task2, "Hello_task2", 200, (void*) usr_str, 3, &t_handle_2);
    if (status != pdPASS) {
        PRINTF("Task creation failed!.\r\n");
        while (1)
            ;
    }

    vTaskStartScheduler();
    for (;;)
        ;
}   
\end{lstlisting}
\end{filecontents}

\begin{filecontents}[overwrite]{./sections/p1_task1.tex}
\begin{lstlisting}[language=c,caption=Problem 1 Input Task, label=list:p1_task1]
void hello_task(void *pvParameters) {
    while (1) {
        PRINTF("Enter a string input\n");
        scanf("%s", usr_str);

        vTaskDelay(1000 / portTICK_PERIOD_MS);
        xTaskNotifyGive(t_handle_2);
        vTaskDelete(NULL);
    }
}
\end{lstlisting}
\end{filecontents}


\begin{filecontents}[overwrite]{./sections/p1_task2.tex}
\begin{lstlisting}[language=c,caption=Problem 1 Print Task, label=list:p1_task2]
void hello_task2(void *pvParameters) {
    while (1) {
        ulTaskNotifyTake(pdTRUE, 100);

        PRINTF("Hello %s.\r\n", usr_str);

        vTaskDelay(1000 / portTICK_PERIOD_MS);
    }
}
\end{lstlisting}
\end{filecontents}

\section*{Problem 1}
We write a program that generates two tasks, with the first task getting an input string from the user using \texttt{scanf} and then notifying the printing task with \texttt{xTaskNotifyGive}. The task will delete itself afterwards. The second task will wait for the notification by blocking on \texttt{ulTaskNotifyTake}. The task will then print the input string and wait one second. The main function is shown below in Listing~\ref{list:p1_main}. The two tasks are shown in Listings~\ref{list:p1_task1} and \ref{list:p1_task2}.

\input{sections/p1_main.tex}
\input{sections/p1_task1.tex}
\input{sections/p1_task2.tex}