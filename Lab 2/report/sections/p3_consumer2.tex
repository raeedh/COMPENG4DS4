%% LaTeX2e file `./sections/p3_consumer2.tex'
%% generated by the `filecontents' environment
%% from source `lab2' on 2023/03/03.
%%
\begin{lstlisting}[language=c,caption=Problem 3 Consumer 2 Task, label=list:p3_cons2]
void consumer2_sem(void *pvParameters) {
    SemaphoreHandle_t *semaphores = (SemaphoreHandle_t*) pvParameters;
    SemaphoreHandle_t producer2_semaphore = semaphores[1];
    SemaphoreHandle_t consumer_semaphore = semaphores[2];
    BaseType_t status;

    char *receive_str_cap;

    receive_str_cap = malloc(sizeof(char) * 100);

    while (1) {
        xSemaphoreGive(consumer_semaphore);
        status = xSemaphoreTake(producer2_semaphore, portMAX_DELAY);

        if (status != pdPASS) {
            PRINTF("Failed to acquire producer2_semaphore\r\n");

            while (1)
                ;
        }

        for (int i = 0; i < 100; i++) {
            receive_str_cap[i] = toupper(usr_str[i]);
        }

        PRINTF("Received Value in captal = %s\r\n", receive_str_cap);
    }
}
\end{lstlisting}
