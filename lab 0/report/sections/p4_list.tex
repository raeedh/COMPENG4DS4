\begin{lstlisting}[language=c,caption=Problem 4, label=list:p4]
/* Definitions */
#define GPIOA	((GPIO_Struct*) 0x400FF000)
#define GPIOB	((GPIO_Struct*) 0x400FF040)
#define GPIOC	((GPIO_Struct*) 0x400FF080)
#define GPIOD	((GPIO_Struct*) 0x400FF0C0)
#define GPIOE	((GPIO_Struct*) 0x400FF100)

/* Problem 4 Helper Functions */
void initPin(GPIO_Struct *port, uint32_t pin) {
	writePin(port, pin, 1);
	port->GPIO_PDDR |= (1UL << pin);
}

void togglePin(GPIO_Struct *port, uint32_t mask) {
	port->GPIO_PDOR ^= (mask);
}

void writePin(GPIO_Struct *port, uint32_t pin, uint8_t output) {
	if (output == 0U) {
		port->GPIO_PDOR |= (1UL << pin);
	} else {
		port->GPIO_PDOR &= ~(1UL << pin);
	}
}

/* Problem 4 main Function */
int main(void) {
    /* Board pin, clock, debug console init */
    BOARD_InitBootPins();
    BOARD_InitBootClocks();
    BOARD_InitDebugConsole();

    /* Print a note to terminal. */
    PRINTF("\r\nGPIO Driver example\r\n");
    PRINTF("\r\nThe LED is blinking.\r\n");

    /* Init output LED GPIO. */
    initPin(BOARD_LED_GPIO_BLUE, BOARD_LED_GPIO_PIN_BLUE);
    initPin(BOARD_LED_GPIO_GREEN, BOARD_LED_GPIO_PIN_GREEN);
    initPin(BOARD_LED_GPIO_RED, BOARD_LED_GPIO_PIN_RED);

    while (1) {
        delay();
        togglePin(BOARD_LED_GPIO_BLUE, 1u << BOARD_LED_GPIO_PIN_BLUE);
        delay();
        togglePin(BOARD_LED_GPIO_BLUE, 1u << BOARD_LED_GPIO_PIN_BLUE);
        delay();
        togglePin(BOARD_LED_GPIO_GREEN, 1u << BOARD_LED_GPIO_PIN_GREEN);
        delay();
        togglePin(BOARD_LED_GPIO_GREEN, 1u << BOARD_LED_GPIO_PIN_GREEN);
        delay();
        togglePin(BOARD_LED_GPIO_RED, 1u << BOARD_LED_GPIO_PIN_RED);
        delay();
        togglePin(BOARD_LED_GPIO_RED, 1u << BOARD_LED_GPIO_PIN_RED);
    }
}
\end{lstlisting}