%% LaTeX2e file `./sections/p2_producer.tex'
%% generated by the `filecontents' environment
%% from source `lab2' on 2023/03/03.
%%
\begin{lstlisting}[language=c,caption=Problem 2 Producer Queue, label=list:p2_prod]
void producer_queue(void *pvParameters) {
    QueueHandle_t queue1 = (QueueHandle_t) pvParameters;
    BaseType_t status;

    char *usr_str;
    usr_str = malloc(sizeof(char) * 10);

    printf("please enter a string\n");
    scanf("%s", usr_str);

    while (1) {
        status = xQueueSend(queue1, (void* ) &usr_str, portMAX_DELAY);
        if (status != pdPASS) {
            PRINTF("Queue Send failed!.\r\n");
            while (1)
                ;
        }

        vTaskDelay(1000 / portTICK_PERIOD_MS);
    }

    vTaskDelete(NULL);
}
\end{lstlisting}
